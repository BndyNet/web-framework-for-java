<div ng-controller="UserProfileCtrl">
    <ui-page-header title="'admin.modules.core.userProfile.title'"
                    breadcrumbs="[{'text': 'admin.modules.core.userProfile.title'}]"></ui-page-header>
    <section class="content">
        <div class="box box-default">
            <div class="box-body">
                <form name="mainForm" class="col-sm-8 col-sm-offset-2">
                    <div class="row">
                        <div class="col-xs-7">
                            <div class="row">
                                <div class="col-xs-6">
                                    <ui-input name="realName"
                                              label="admin.modules.core.userProfile.labelRealName"
                                              ng-model="viewModel.realName"></ui-input>
                                </div>
                                <div class="form-group col-xs-6">
                                    <label>&nbsp;</label>
                                    <div class="form-control-static">
                                        <label class="iradio">
                                            <input type="radio" name="gender" ng-model="viewModel.gender" value="1" />
                                            <span>{{'admin.modules.core.userProfile.valueMale'|translate}}</span>
                                        </label>
                                        &nbsp;
                                        <label class="iradio">
                                            <input type="radio" name="gender" ng-model="viewModel.gender" value="0" />
                                            <span>{{'admin.modules.core.userProfile.valueFemale'|translate}}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <ui-input label="admin.modules.core.userProfile.labelEmail"
                                      name="email"
                                      type="email"
                                      error-message="common.msgInvalidEmail"
                                      ng-model="viewModel.email"></ui-input>

                            <div class="form-group">
                                <label ng-bind="'admin.modules.core.userProfile.labelBirthday'|translate"></label>
                                <input type="text" class="datepicker form-control" ng-model="viewModel.birthday" />
                            </div>
                            <button class="btn btn-flat btn-primary" ng-click="updateProfile()" ng-disabled="!mainForm.$valid">
                                {{'admin.modules.core.userProfile.updateProfile'|translate}}
                            </button>
                        </div>
                        <div class="col-xs-5">
                            <div class="text-center">
                                <img alt="User Image" class="img-radius" ng-src="{{user.avatar}}" style="width: 200px;">
                                <br />
                                <br />
                                <a class="btn btn-flat btn-default" ngf-select="uploadAvatar($file, $invalidFiles)"
                                   accept="image/*" ngf-max-height="1000" ngf-max-size="1MB">
                                    {{'admin.modules.core.userProfile.uploadAvatar'|translate}}
                                </a>
                            </div>
                        </div>
                    </div>
                </form>

                <form name="pwdForm" class="col-sm-8 col-sm-offset-2">
                    <h2 class="with-border">{{'admin.modules.core.userProfile.titleChangePassword'|translate}}</h2>
                    <div class="row">
                        <div class="col-xs-7">
                            <div class="form-group" ng-class="{'has-error': pwdForm.oldPassword.$dirty && pwdForm.oldPassword.$touched && pwdForm.oldPassword.$invalid}">
                                <label>{{'admin.modules.core.userProfile.oldPassword'|translate}}</label>
                                <input name="oldPassword" type="text" class="form-control" ng-model="pwdModel.oldPassword" required>
                                <span class="help-block error-block">{{'common.fieldRequired'|translate}}</span>
                            </div>
                            <div class="form-group" ng-class="{'has-error': pwdForm.newPassword.$dirty && pwdForm.newPassword.$touched && pwdForm.newPassword.$invalid}">
                                <label>{{'admin.modules.core.userProfile.newPassword'|translate}}</label>
                                <input name="newPassword" type="text" class="form-control" ng-model="pwdModel.newPassword" required>
                                <span class="help-block error-block">{{'common.fieldRequired'|translate}}</span>
                            </div>
                            <div class="form-group" ng-class="{'has-error': pwdModel.newPassword != pwdModel.confirmPassword}">
                                <label>{{'admin.modules.core.userProfile.confirmPassword'|translate}}</label>
                                <input type="text" class="form-control" ng-model="pwdModel.confirmPassword" required>
                                <span class="help-block error-block">{{'admin.modules.core.userProfile.unmatchedConfirmPassword'|translate}}</span>
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-flat btn-primary" ng-disabled="pwdForm.$invalid || pwdModel.newPassword != pwdModel.confirmPassword" ng-click="changePassword()">
                                    {{'admin.modules.core.userProfile.updatePassword'|translate}}
                                </button>
                            </div>
                        </div>
                        <div class="col-xs-5"></div>
                    </div>
                </form>
            </div>
        </div>
    </section>
</div>